{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 054822313a291c87d211","webpack:///external \"mongoose\"","webpack:///./src/index.js","webpack:///external \"babel-polyfill\"","webpack:///external \"pusher-js\"","webpack:///external \"lodash\"","webpack:///external \"body-parser\"","webpack:///./src/connectToDB.js","webpack:///external \"express\"","webpack:///external \"ip\"","webpack:///external \"net\"","webpack:///./src/db/syncBlocksWithStore.js","webpack:///external \"dotenv\"","webpack:///./src/store/store.js","webpack:///./src/classes/Block.js","webpack:///./src/store/reducer.js","webpack:///external \"redux\"","webpack:///./src/models/Block.js","webpack:///external \"bluebird\"","webpack:///external \"colors\"","webpack:///./node_modules/js-sha256/src/sha256.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/connectWithPeer.js"],"names":["require","config","app","use","json","urlencoded","extended","ipAddr","address","PUSHER_APP_KEY","DEFAULT_PORT","MAX_PEERS","handleConnection","conn","remoteAddr","remoteAddress","remotePort","console","log","blue","setEncoding","on","onConnData","onConnClose","onConnError","d","split","type","args","version","lastBlockHash","state","lastBlock","getState","write","header","getBlockHeaderHash","join","err","message","allPeers","startup","listen","process","env","PORT","gray","dbConnection","server","createServer","JSON","stringify","client","auth","params","ip_addr","port","cluster","authEndpoint","encrypted","numBlocks","channel","subscribe","bind","members","each","member","id","push","ip","slice","dispatch","i","length","peer","newAllPeers","forEach","Promise","resolve","reject","connect","Error","connectToDB","count","findOne","sort","timestamp","limit","block","newBlock","previousHash","merkleHash","difficulty","nonce","txs","blocksize","save","formatBlock","syncBlocksWithStore","setHeader","reducer","Redux","store","createStore","addLoggingToDispatch","rawDispatch","action","yellow","Object","keys","green","returnValue","module","exports","COIN","genesisPreviousHash","genesisMerkleRoot","genesisDifficulty","genesisNonce","genesisTimestamp","genesisTransaction","vin","n","prevout","vout","nValue","scriptPubKey","Block","isGenesis","Date","now","addTransaction","transaction","initialState","dbLoaded","nodeCoin","schema","default","Number","String","required","Array","BlockSchema","Schema","BlockModel","model","Socket","data","toString","connectWithPeer"],"mappings":"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AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,OAAO;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,0BAA0B;AACtD;AACA;AACA,OAAO;AACP,4BAA4B,0BAA0B;AACtD;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AAAA;AACP;AACA;AACA,CAAC;;;;;;;ACrgBD;AACA;;;;;;;;;;;;;;;;qECCA,iBAA+BtE,IAA/B,EAAqC5C,aAArC,EAAoDD,OAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AACEZ,oBAAQC,GAAR,CAAY,0BAAZ,EAAwCwD,IAAxC,EAA8C5C,aAA9C,EAA6DD,OAA7D;AACM2B,gBAFR,GAEekB,KAAKlB,IAAL,IAAa,IAF5B;AAGQJ,kBAHR,GAGiB,IAAI,cAAI8F,MAAR,EAHjB;;AAIE9F,mBAAO4B,OAAP,CAAexB,IAAf,EAAqBkB,KAAKL,EAA1B,EAA8B,YAAM;AAClCpD,sBAAQC,GAAR,CAAY,uBAAZ,EAAqCwD,IAArC;AACA,kBAAM/C,OAAO,SAAb;AACAyB,qBAAOlB,KAAP,CAAa,CAAEP,IAAF,EAAQE,OAAR,EAAiBC,aAAjB,EAAiCO,IAAjC,CAAsC,GAAtC,CAAb;AACD,aAJD;;AAMAe,mBAAO/B,EAAP,CAAU,MAAV,EAAkB,gBAAQ;AACxBJ,sBAAQC,GAAR,CAAY,cAAZ,EAA4BiI,KAAKC,QAAL,EAA5B;AACD,aAFD;;AAIAhG,mBAAO/B,EAAP,CAAU,OAAV,EAAmB,YAAM;AACvBJ,sBAAQC,GAAR,CAAY,qBAAZ;AACD,aAFD;;AAdF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAemI,e;;;;;AAFf;;;;;;;;kBAqBeA,e","file":"nodecoin.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"events\"] = factory();\n\telse\n\t\troot[\"events\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 054822313a291c87d211","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","import 'colors';\nimport 'babel-polyfill';\n\nimport Client from 'pusher-js';\nimport _ from 'lodash';\nimport bodyParser from 'body-parser';\nimport connectToDB from './connectToDB';\nimport connectWithPeer from './connectWithPeer';\nimport express from 'express';\nimport ip from 'ip';\nimport mongoose from 'mongoose';\nimport net from 'net';\nimport store from 'store/store';\nimport syncBlocksWithStore from 'db/syncBlocksWithStore';\n\nrequire('dotenv').config();\n\n\nconst app = express();\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\n\n// get current IP address in use\nconst ipAddr = ip.address();\n\nconst PUSHER_APP_KEY = '86e36fb6cb404d67a108'; // connect via public key\nconst DEFAULT_PORT = 8334; // default port for net connections\nconst MAX_PEERS = 25;\n\nfunction handleConnection(conn) {\n  const remoteAddr = `${conn.remoteAddress}:${conn.remotePort}`;\n  console.log(`> New client connection from ${remoteAddr}`.blue);\n\n  conn.setEncoding('utf8');\n  conn.on('data', onConnData);\n  conn.on('close', onConnClose);\n  conn.on('error', onConnError);\n\n  function onConnData(d) {\n    console.log(`> Connection data from: ${remoteAddr}`, d);\n    let [ type, ...args ] = d.split(' ');\n    let version, lastBlockHash, state, lastBlock;\n    switch(type) {\n      case 'VERSION':\n        version = args[0];\n        lastBlockHash = args[1];\n        state = store.getState();\n        lastBlock = state.lastBlock;\n        conn.write([ 'VERSION', lastBlock.header.version, lastBlock.getBlockHeaderHash() ].join(' '));\n    }\n  }\n  function onConnClose() {\n    console.log('connection from %s closed', remoteAddr);\n  }\n  function onConnError(err) {\n    console.log('Connection %s error: %s', remoteAddr, err.message);\n  }\n}\n\nlet allPeers = [ ];\n\n\nfunction startup() {\n  app.listen(process.env.PORT || 3000, async function() {\n    console.log('> Server listening on port '.gray, process.env.PORT, ipAddr);\n\n    // connect to local instance of MongoDB\n    const dbConnection = await connectToDB();\n    console.log('> Connected to local MongoDB'.gray);\n\n    // create a TCP/IP server on current IP address\n    const server = net.createServer();\n    server.on('connection', handleConnection);\n\n    server.listen(8334, function() {\n      console.log(`> TCP/IP server listening on:`.gray, JSON.stringify(server.address()));\n    });\n\n    // initialize presence channel via Pusher\n    const client = new Client(PUSHER_APP_KEY, {\n      auth: { params: { ip_addr: ipAddr, port: 8334 } },\n      cluster: 'us2',\n      authEndpoint: 'https://pusher-presence-auth.herokuapp.com/pusher/auth',\n      encrypted: true\n    });\n\n    // initialize blockchain (MongoDB local)\n    const { numBlocks, lastBlock } = await syncBlocksWithStore();\n\n    console.log('> Subscribing to broadcast changes...'.gray);\n    const channel = client.subscribe('presence-node-coin');\n\n    // SUCCESSFULLY JOINED\n    channel.bind('pusher:subscription_succeeded', async (members) => {\n      console.log('> Subscription succeeded: ', members);\n      allPeers = [ ];\n      channel.members.each(member => {\n        if (member.id !== ipAddr) {\n          allPeers.push({ ip: member.id });\n        }\n      });\n      allPeers = allPeers.slice(0, MAX_PEERS);\n      // console.log('> All peers: ', allPeers);\n      store.dispatch({ type: 'SET_PEERS', allPeers });\n      let lastBlock = store.getState().lastBlock;\n      let lastBlockHash = lastBlock.getBlockHeaderHash();\n      let version = lastBlock.header.version;\n      // console.log('> Last block hash: ', version, lastBlockHash);\n\n      // send version message to all peers, w/ version and last block hash\n      for (let i = 0; i < allPeers.length; i++) {\n        const peer = allPeers[i];\n        await connectWithPeer(peer, lastBlockHash, version);\n      }\n    });\n\n    // MEMBER ADDED\n    channel.bind('pusher:member_added', function(member){\n      let allPeers = store.getState().allPeers;\n      allPeers.push({ ip: member.id });\n      store.dispatch({ type: 'SET_PEERS', allPeers });\n      // TODO: send ping to new member to exchange headers\n    });\n\n    // MEMBER REMOVED\n    channel.bind('pusher:member_removed', function(member){\n      console.log('> Member removed: ', member);\n      let allPeers = store.getState().allPeers;\n      let newAllPeers = [ ];\n      allPeers.forEach(peer => {\n        if (peer.ip !== member.id) {\n          newAllPeers.push(peer);\n        }\n      });\n      store.dispatch({ type: 'SET_PEERS', allPeers: newAllPeers });\n      // TODO: stop any ongoing requests with peer\n    });\n  });\n}\n\nstartup();\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"pusher-js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pusher-js\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 5\n// module chunks = 0","import mongoose from 'mongoose';\n\nasync function connectToDB() {\n  return new Promise((resolve, reject) => {\n    mongoose.connect('mongodb://localhost:27017/nodecoin', (err) => {\n      if (err) {\n        throw new Error(`Error connecting to mongo. ${err}`);\n        reject(err);\n      } else {\n        // console.log('> Successfully conected to MongoDB 🔐');\n        resolve(true);\n      }\n    });\n  });\n}\n\nexport default connectToDB;\n\n\n\n// WEBPACK FOOTER //\n// ./src/connectToDB.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"ip\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ip\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"net\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"net\"\n// module id = 9\n// module chunks = 0","import BlockClass from 'classes/Block';\nimport BlockModel from 'models/Block';\nimport store from 'store/store';\n\nasync function syncBlocksWithStore() {\n  let numBlocks = await BlockModel.count();\n  let lastBlock = await BlockModel.findOne().sort({ timestamp: -1 }).limit(1);\n\n  if (numBlocks <= 0) {\n    let block = new BlockClass(null, true);\n    let newBlock = new BlockModel({\n      version: block.header.version,\n      previousHash: block.header.previousHash,\n      merkleHash: block.header.merkleHash,\n      timestamp: block.header.timestamp,\n      difficulty: block.header.difficulty,\n      nonce: block.header.nonce,\n      txs: block.txs,\n      blocksize: block.blocksize,\n    });\n    await newBlock.save();\n    lastBlock = newBlock;\n  }\n\n  const { difficulty, nonce } = lastBlock;\n  // update Redux store\n  store.dispatch({ type: 'SET_NONCE', difficulty, nonce });\n  store.dispatch({ type: 'SET_INITIAL_BLOCK_COUNT', lastBlock: formatBlock(lastBlock), numBlocks });\n  return { numBlocks, lastBlock };\n}\n\nfunction formatBlock(block) {\n  let newBlock = new BlockClass(block.previousHash, false, block.timestamp);\n  newBlock.setHeader(block);\n  return newBlock;\n}\n\nexport default syncBlocksWithStore;\n\n\n\n// WEBPACK FOOTER //\n// ./src/db/syncBlocksWithStore.js","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 11\n// module chunks = 0","require('colors');\n\nconst reducer = require('./reducer');\n\nconst Redux = require('redux');\n\nconst store = Redux.createStore(reducer);\n\nstore.dispatch = addLoggingToDispatch(store);\n\nfunction addLoggingToDispatch(store) {\n  const rawDispatch = store.dispatch;\n  return (action) => {\n    console.log(`> Action: ${action.type}`.yellow);\n    // console.log('> prev state'.gray, store.getState());\n    console.log(`> Keys: ${Object.keys(action).join(', ')}`.green);\n    const returnValue = rawDispatch(action);\n    // console.log('> next state'.green, store.getState());\n    // console.log(action.type.green);\n    return returnValue;\n  }\n}\n\nmodule.exports = store;\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/store.js","const store = require('store/store');\n\nimport SHA256 from 'js-sha256';\n\nconst COIN = 100000000;\nconst genesisPreviousHash = '0000000000000000000000000000000000000000000000000000000000000000';\nconst genesisMerkleRoot = '4a5e1e4baab89f3a32518a88c31bc87f618f76673e2cc77ab2127b7afdeda33b';\nconst genesisDifficulty = 486604799;\nconst genesisNonce = 2083236893;\nconst genesisTimestamp = 1231006505000; // Jan 3, 2009\nconst genesisTransaction = {\n  vin: [ { n: 'COINBASE', prevout: null } ],\n  vout: [ { nValue: 50 * COIN, scriptPubKey: '1Nd85AnFYDtaQAG6vF9FVWXFWksG5HuA3M' } ]\n};\n\nclass Block {\n  constructor(previousHash, isGenesis = false, timestamp = Date.now()) {\n    let state = store.getState();\n    this.header = {\n      version: state.version,\n      previousHash: isGenesis ? genesisPreviousHash : previousHash,\n      merkleHash: isGenesis ? genesisMerkleRoot : null,\n      timestamp: isGenesis ? genesisTimestamp : timestamp,\n      difficulty: isGenesis ? genesisDifficulty : state.difficulty,\n      nonce: isGenesis ? genesisNonce : state.nonce,\n    };\n    this.txs = [ ];\n    if (isGenesis) {\n      this.addTransaction(genesisTransaction);\n    }\n    this.blocksize = JSON.stringify(this).length;\n  }\n  getBlockHeaderHash() {\n    const { version, previousHash, merkleHash, timestamp, difficulty, nonce } = this.header;\n    return SHA256([ version, previousHash, merkleHash, timestamp, difficulty, nonce, JSON.stringify(this.txs) ].join(' '));\n  }\n  setHeader(header) {\n    this.header = {\n      version: header.version,\n      previousHash: header.previousHash,\n      merkleHash: header.merkleHash,\n      timestamp: header.timestamp,\n      difficulty: header.difficulty,\n      nonce: header.nonce,\n    };\n    return this.header;\n  }\n  addTransaction(transaction) {\n    this.txs.push(transaction);\n    return this.txs;\n  }\n};\n\n// let block = new Block(null, true); // genesis block\n// console.log('> Genesis block: ', block);\n\nmodule.exports = Block;\n\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Block.js","const initialState = {\n  /*\n    this checks at start, connect to local mongo and load number of blocks -\n    let count = await Blocks.find({}).count();\n    Then load these variables.\n    If count == 0, hard code genesis block, then emit last block to peers\n    If count > 0, find last block - await Blocks.find({ }).sort({ timestamp: -1 }).limit(1);\n    Emit last block to peers to receive remaining blocks\n  */\n  dbLoaded: false,\n  numBlocks: 0,\n  allPeers: [ ], // list of { ip: String, port: Number }\n  lastBlock: null,\n  version: 1,\n  nonce: 0,\n  difficulty: 0,\n  numBlocks: 0,\n};\n\nconst nodeCoin = (state = initialState, action) => {\n  switch(action.type) {\n    case 'SET_INITIAL_BLOCK_COUNT':\n      return {\n        ...state,\n        dbLoaded: true,\n        lastBlock: action.lastBlock,\n        numBlocks: action.numBlocks,\n      };\n    case 'SET_NONCE':\n      return {\n        ...state,\n        difficulty: action.difficulty,\n        nonce: action.nonce,\n      };\n    case 'SET_PEERS':\n      return { ...state, allPeers: action.allPeers };\n    default:\n      return state;\n  }\n};\n\nmodule.exports = nodeCoin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/reducer.js","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = 15\n// module chunks = 0","import mongoose from 'mongoose';\n\nmongoose.Promise = require('bluebird');\n\nconst schema = {\n  version: { default: 1, type: Number },\n  previousHash: { type: String, required: true },\n  merkleHash: { type: String, required: true },\n  timestamp: { type: Number, required: true },\n  difficulty: { type: Number, required: true },\n  nonce: { type: Number, required: true },\n  txs: { type: Array, default: [ ] },\n  blocksize: { type: Number, required: true },\n};\n\nconst BlockSchema = new mongoose.Schema(schema);\n\nconst BlockModel = mongoose.model('blocks', BlockSchema);\n\nexport default BlockModel;\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/Block.js","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"colors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"colors\"\n// module id = 18\n// module chunks = 0","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/js-sha256/src/sha256.js\n// module id = 19\n// module chunks = 0","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/amd-options.js\n// module id = 20\n// module chunks = 0","import net from 'net';\n\nasync function connectWithPeer(peer, lastBlockHash, version) {\n  console.log('> Connecting with peer: ', peer, lastBlockHash, version);\n  const port = peer.port || 8334;\n  const client = new net.Socket();\n  client.connect(port, peer.ip, () => {\n    console.log('> Connected to peer: ', peer);\n    const type = 'VERSION';\n    client.write([ type, version, lastBlockHash ].join(' '));\n  });\n\n  client.on('data', data => {\n    console.log('> Received: ', data.toString());\n  });\n\n  client.on('close', () => {\n    console.log('> Connection closed');\n  })\n}\n\nexport default connectWithPeer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/connectWithPeer.js"],"sourceRoot":""}